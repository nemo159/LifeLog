# 기능 명세서: MVP 핵심 기능 (Core Features)

**기능 브랜치**: `feature/mvp-core`  
**작성일**: 2025-12-27  
**상태**: Draft (초안)  
**입력**: 사용자 요청 "LifeLog 앱의 MVP 기능 구현"

## 사용자 시나리오 & 테스트 (User Scenarios & Testing)

<!--
  중요: 사용자 스토리는 중요도 순으로 우선순위가 매겨져야 합니다.
  각 스토리는 독립적으로 테스트 가능해야 하며, 하나만 구현되어도 가치를 제공해야 합니다.
-->

### 시나리오 1 - 새로운 일상 기록하기 (Priority: P1)

사용자는 오늘 하루 있었던 일을 기분, 메모, 사진과 함께 기록하고 싶어 합니다.

**왜 이 순위인가**: 기록(Input)이 없으면 조회(Output)도 불가능하므로 가장 핵심적인 기능입니다.

**독립 테스트 방법**:
1. 앱 실행 후 '작성(+)' 버튼 클릭.
2. 기분(3점), 메모("테스트"), 사진 1장 선택.
3. '저장' 버튼 클릭.
4. 타임라인(메인 화면)에 방금 작성한 항목이 표시되는지 확인.

**인수 시나리오 (Acceptance Scenarios)**:

1. **Given** 앱의 메인 화면(타임라인)에서, **When** '+' 버튼을 누르면, **Then** '새 기록 작성' 화면으로 이동한다.
2. **Given** 작성 화면에서, **When** 기분을 선택하고 내용을 입력한 뒤 저장하면, **Then** 데이터가 로컬 DB에 저장되고 타임라인 화면으로 돌아온다.
3. **Given** 작성 화면에서, **When** '사진 추가'를 누르면, **Then** 시스템 Photo Picker가 열리고 사진을 선택할 수 있다.

---

### 시나리오 2 - 타임라인 조회하기 (Priority: P1)

사용자는 과거에 작성한 기록들을 최신순으로 훑어보고 싶어 합니다.

**왜 이 순위인가**: 저장된 데이터를 시각적으로 확인하고 회고하는 것이 앱의 주 목적입니다.

**독립 테스트 방법**:
1. DB에 테스트 데이터(Entry) 3개를 미리 넣어둠 (또는 시나리오 1 수행).
2. 앱 실행.
3. 메인 화면에 3개의 카드가 날짜 내림차순(최신순)으로 정렬되어 보이는지 확인.

**인수 시나리오**:

1. **Given** 저장된 기록이 있을 때, **When** 앱을 실행하면, **Then** 날짜순(최신이 위)으로 기록 목록이 표시된다.
2. **Given** 기록이 하나도 없을 때, **When** 앱을 실행하면, **Then** "첫 기록을 남겨보세요" 같은 안내 문구(Empty State)가 표시된다.

---

### 시나리오 3 - 사진 데이터 관리 (Priority: P2)

사용자는 갤러리 앱에서 원본 사진을 지우더라도, 일기 앱 내에서는 사진이 유지되기를 기대합니다 (또는 그 반대 정책).
*MVP 정책: 원본 의존성을 낮추기 위해 앱 전용 공간으로 복사본을 만듭니다.*

**왜 이 순위인가**: 사진 깨짐 현상(Broken Image)은 사용자 경험을 크게 해칩니다.

**독립 테스트 방법**:
1. 기록 작성 시 사진 첨부 후 저장.
2. 갤러리 앱에서 해당 원본 사진 삭제.
3. LifeLog 앱에서 해당 기록 조회 시 사진이 여전히 잘 나오는지 확인.

**인수 시나리오**:

1. **Given** 사진을 포함한 기록을 저장할 때, **When** 저장이 완료되면, **Then** 앱 내부 저장소(`files/images`)에 해당 사진의 사본이 생성되어야 한다.

## 요구사항 (Requirements)

<!--
  개발자가 구현해야 할 구체적인 기능적/비기능적 요구사항입니다.
-->

### 기능적 요구사항 (Functional Requirements)

- **FR-001**: 사용자는 1~5점 척도로 기분을 선택할 수 있어야 한다. (UI: 아이콘 또는 이모지)
- **FR-002**: 사용자는 텍스트로 제한 없이 메모를 작성할 수 있어야 한다.
- **FR-003**: 사용자는 Photo Picker를 통해 최대 5장(MVP 기준)의 사진을 첨부할 수 있어야 한다.
  - *비고: Android SDK 33+ Photo Picker 권장.*
- **FR-004**: 타임라인은 `Entry`의 날짜(`dateEpochDay`)를 기준으로 내림차순 정렬되어야 한다.
- **FR-005**: 날짜별로 그룹화하거나, 단순 리스트로 보여주되 날짜가 명확히 표시되어야 한다.

### 비기능적 요구사항 (Non-Functional Requirements)

- **NFR-001 (보안)**: 사진 접근 시 `READ_MEDIA_IMAGES` 전체 권한을 요청하지 않는다. (Photo Picker 사용)
- **NFR-002 (성능)**: 타임라인 스크롤 시 버벅임(Jank)이 없어야 한다. (이미지 로딩 최적화 - Coil/Glide 사용 및 썸네일 처리)
- **NFR-003 (데이터)**: 네트워크 연결이 끊긴 상태(Offline)에서도 읽기/쓰기가 100% 동작해야 한다.

## 주요 엔티티 (Key Entities)

<!--
  구현 시 참고할 데이터 모델의 핵심 구조입니다.
-->

### Entry (기록)
- **id** (Long, PK): 고유 ID
- **date** (Long): 기록 날짜 (Epoch Day)
- **mood** (Int): 1~5 점수
- **content** (String): 본문 내용

### Photo (사진)
- **id** (Long, PK): 고유 ID
- **entry_id** (Long, FK): 소속된 기록 ID
- **uri** (String): 앱 내부 저장소에 복사된 파일의 경로 (Content URI 아님)

## 성공 기준 (Success Criteria)

<!--
  이 기능이 "완료"되었다고 판단할 수 있는 객관적인 기준입니다.
-->

### 측정 가능한 결과 (Measurable Outcomes)

- **SC-001**: 앱 설치 후 권한 팝업 없이(알림 제외) 바로 글쓰기 화면 진입 및 사진 첨부가 가능하다.
- **SC-002**: 텍스트와 사진(3장 이상)이 포함된 기록을 저장하고 다시 불러오는 데 1초 미만이 소요된다. (로컬 DB의 이점)
- **SC-003**: 앱 재설치 전까지는 갤러리에서 사진을 지워도 앱 내에서는 사진이 유지된다.
